# フェーズ 9: データベース実装（現時点では不要）

## 概要

YAGNI原則に従い、データベースは実際に必要になるまで実装しない。
現在のアプリケーションは、メモリ内でのデータ管理で十分。

## データベースが必要になる条件

### 以下の要件が発生した場合のみ検討

1. **履歴保存が必要になった場合**
   - ユーザーがチャット履歴を保存したい
   - セッション間でデータを永続化したい
   - 検索機能が必要になった

2. **複数ユーザー対応が必要になった場合**
   - 複数のユーザーが同時に使用
   - ユーザーごとのデータ分離が必要

3. **大量データの管理が必要になった場合**
   - メモリに収まらない量のデータ
   - パフォーマンス問題が発生

## 削除した項目（YAGNI原則）

以下の項目は実際に必要になるまで実装しない：

**データベース基盤**
- SQLite設定・最適化
- TypeORM統合
- マイグレーション設定
- 接続プール管理

**エンティティ設計**
- Userエンティティ
- Sessionエンティティ
- Messageエンティティ
- その他の関連エンティティ

**データベース機能**
- トランザクション管理
- インデックス設計
- バックアップ・リストア
- データ暗号化

**高度な機能**
- 全文検索（FTS5）
- トリガー・ストアドプロシージャ
- パーティショニング
- レプリケーション

## 現在の代替実装

### メモリ内データ管理（現在の実装）

```typescript
// 現在の簡易実装例
class SimpleDataStore {
  private messages: Message[] = [];
  
  addMessage(message: Message): void {
    this.messages.push(message);
  }
  
  getMessages(): Message[] {
    return this.messages;
  }
}
```

## 実装方針

### データベースが必要になった場合

1. **最小限の実装から始める**
   - 単純なSQLiteファイル
   - 基本的なCRUD操作のみ
   - 複雑なORMは後回し

2. **段階的に機能追加**
   - まずは履歴保存のみ
   - 必要に応じて検索機能
   - パフォーマンス問題が出てから最適化

## 注意事項

- **現時点でデータベースは不要**
- **メモリ内管理で十分**
- **必要になってから実装**
- **過度な設計は避ける**