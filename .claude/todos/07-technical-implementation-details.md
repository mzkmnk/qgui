# フェーズ 7: 技術実装詳細 - 機能単位 TDD 実装

## 概要

YAGNI原則に従い、既に実装が必要と判明している技術的な項目のみを記載。
詳細な実装は各機能のPRで必要に応じて行う。

## 実装済み・実装予定の技術項目

### 1. 基本的な型定義（実装時に必要に応じて）

- [ ] **WebSocketメッセージ型**: メッセージ送受信に必要な型のみ
- [ ] **PTYプロセス型**: コマンド実行に必要な型のみ
- [ ] **基本的なDTO**: 入力検証に必要な最小限のDTO

### 2. エラーハンドリング（問題発生時に対応）

- [ ] **基本的なエラー処理**: try-catchと適切なエラーメッセージ
- [ ] **WebSocketエラー**: 接続エラーの基本的な処理
- [ ] **PTYエラー**: プロセス実行エラーの基本的な処理

### 3. リソース管理（必要最小限）

- [ ] **PTYプロセスクリーンアップ**: プロセス終了時の処理
- [ ] **WebSocket接続管理**: 接続・切断の基本的な管理
- [ ] **メモリ管理**: 明らかな問題がある場合のみ対処

## 削除した項目（YAGNI原則）

以下の項目は実際に必要になるまで実装しない：

**高度な型システム**
- ブランド型の使用
- 複雑な型ユーティリティ
- 過度な型の抽象化
- ファントム型

**設計パターン**
- 複雑なデザインパターンの適用
- 過度な抽象化
- 不要なインターフェース
- 将来の拡張を見越した設計

**インフラストラクチャ**
- DI（依存性注入）の複雑な設定
- カスタムデコレーター
- AOP（アスペクト指向プログラミング）
- イベントソーシング

**その他**
- 詳細なドキュメント生成
- 複雑なビルド設定
- カスタムツールチェーン
- メタプログラミング

## 実装方針

### シンプルに保つ

1. **必要になってから実装**
   - 型は使う時に定義
   - エラー処理は問題が起きてから
   - 最適化は遅くなってから

2. **標準的な方法を使う**
   - Angularの標準機能を活用
   - NestJSの標準機能を活用
   - 独自実装は最小限に

3. **読みやすさを優先**
   - 複雑な抽象化より具体的な実装
   - 明示的なコードを書く
   - コメントは必要な箇所のみ

## 各PRでの技術的な確認事項

- [ ] 必要な型定義がされている
- [ ] エラーが適切に処理されている
- [ ] リソースが適切に管理されている
- [ ] 過度に複雑でない