# フェーズ 4: チャット UI 基盤 + Crush 風プロフェッショナル UI/UX

## 概要

ChatGPT/Claude.ai 風の対話型 UI を構築し、Crush 風の洗練されたデザインを適用する。
Amazon Q CLI との統合基盤を整え、プロフェッショナルなユーザー体験を提供する。

## 実装順序の理由

**なぜチャット UI + プロフェッショナル UI を同時に実装するのか：**

1. UI の二度手間を避ける（基本実装 → 改善の繰り返しを防ぐ）
2. 最初から完成度の高い UI で開発・テストができる
3. ユーザーフィードバックサイクルの短縮
4. Amazon Q 統合時に完成形の UI で動作確認可能

## 1. チャット UI 基盤（完了済み）

### 1.1 基本的なチャットコンポーネント

- [x] **実装**: ChatComponent の作成
  - メッセージバブル（ユーザー/AI）
  - タイピングインジケーター
  - 入力エリア
- [x] **Tailwind 移行**: styles 配列を削除、Tailwind クラスで実装
- [x] **テスト**: ChatComponent のテスト実装（7 テストケース）
- [x] **動作確認**: チャット UI が表示される

### 1.2 メッセージ表示機能

- [x] **実装**: メッセージのスタイリング
  - ユーザーメッセージ：右寄せ、青背景
  - AI メッセージ：左寄せ、白背景
  - アバター表示
- [x] **改行処理**: whitespace-pre-wrap で改行保持
- [x] **動作確認**: メッセージが正しく表示される

### 1.3 基本的な操作

- [x] **メッセージ入力**: Enter キーで送信、Shift+Enter で改行
- [x] **コピー&ペースト**: テキスト選択とコピーが可能
- [x] **レスポンシブ**: 基本的なレスポンシブ対応

## 2. Crush 風プロフェッショナルテーマ

### 2.1 ダークテーマとカラーパレット

- [x] **実装**: Crush 風カラーパレット適用
  - 背景: ダークグレー (#0a0a0a)
  - アクセント: オレンジ (#f97316)
  - テキスト: 高コントラスト
- [x] **動作確認**: 統一感のある配色

### 2.2 グラスモーフィズム効果

- [x] **実装**: 半透明効果とブラー
  ```typescript
  // Tailwindクラスで実装
  backdrop-blur-md bg-black/85 border border-white/10
  ```
- [x] **動作確認**: モダンな見た目

## 3. コマンドパレット（Cmd+K）

### 3.1 コマンドパレット実装

- [x] **Red**: `command-palette.component.spec.ts` - 起動テスト
- [x] **Green**: PrimeNG Dialog 使用
- [x] **実装**:
  - キーボードショートカット（Cmd/Ctrl+K）
  - あいまい検索機能
  - コマンド一覧表示
- [x] **動作確認**: スムーズに開閉

## 4. AI 応答の美化

### 4.1 マークダウン対応

- [x] **Red**: マークダウンレンダリングテスト
- [x] **Green**: marked.js 統合
- [x] **実装**:
  - ヘッダー、リスト、コードブロック
  - インラインコード、強調
- [x] **動作確認**: 構造化された表示

### 4.2 シンタックスハイライト

- [x] **実装**: Prism.js または highlight.js 統合
- [x] **動作確認**: コードが色付けされる

## 5. サイドバーとレイアウト

### 5.1 3 カラムレイアウト

- [x] **実装**:
  - 左サイドバー: セッション管理
  - メインエリア: チャット
  - 右パネル: 詳細情報（オプション）
- [x] **動作確認**: レスポンシブ対応

### 5.2 セッション管理

- [x] **Red**: セッション切り替えテスト
- [x] **Green**: セッションリスト実装
- [x] **実装**:
  - 会話履歴の表示
  - 新規セッション作成
  - セッション切り替え
- [x] **動作確認**: 履歴が保持される

## 6. ステータスバー

### 6.1 情報表示バー

- [ ] **実装**: 下部固定ステータスバー
  - WebSocket 接続状態
  - Amazon Q 接続状態（将来用）
  - 現在時刻
- [ ] **動作確認**: リアルタイム更新

## 7. キーボードショートカット

### 7.1 グローバルショートカット

- [ ] **実装**:
  - `Cmd/Ctrl + K`: コマンドパレット
  - `Cmd/Ctrl + L`: チャットクリア
  - `Cmd/Ctrl + /`: ヘルプ表示
  - `Cmd/Ctrl + N`: 新規セッション
- [ ] **動作確認**: 全ショートカット動作

## 8. アニメーションとトランジション

### 8.1 スムーズなアニメーション

- [ ] **実装**: Angular Animations
  - パネルのスライド
  - フェードイン/アウト
  - ホバーエフェクト
- [ ] **動作確認**: 60fps 維持

### 8.2 ローディング表示

- [ ] **実装**:
  - スピナー
  - プログレスバー
  - スケルトンローダー
- [ ] **動作確認**: 処理中が明確

## 9. 高度な機能（オプション）

### 9.1 画面分割

- [ ] **実装**: スプリットビュー（必要に応じて）
- [ ] **動作確認**: 複数チャット同時表示

### 9.2 タブ管理

- [ ] **実装**: 複数タブ対応（必要に応じて）
- [ ] **動作確認**: タブ切り替え

## 完了条件

### 基本機能（完了済み）

- [x] チャット UI が表示される
- [x] メッセージの送受信ができる
- [x] バックエンドレスポンスの改行が保持される
- [x] タイピングインジケーターが動作する
- [x] Tailwind でスタイリング完了

### プロフェッショナル UI/UX（実装済み）

- [x] Crush 風のダークテーマ適用
- [x] コマンドパレット（Cmd+K）動作
- [x] マークダウン対応
- [x] サイドバーでセッション管理
- [ ] ステータスバー表示
- [ ] キーボードショートカット完備
- [ ] スムーズなアニメーション

## 技術スタック

- **フレームワーク**: Angular 20.1
- **UI ライブラリ**: PrimeNG（一部使用）
- **スタイリング**: Tailwind CSS
- **マークダウン**: marked.js（実装済み）
- **シンタックスハイライト**: Prism.js（実装済み）
- **アニメーション**: CSS Transitions + Tailwind

## 次のフェーズへ

プロフェッショナルなチャット UI が完成し、Amazon Q CLI との統合準備が整う。
フェーズ 5 で Amazon Q 統合に集中できる。
